<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <link rel="stylesheet" href="./CSS/blackboard.css">
    <title>黒板</title>
</head>

<body>
    <canvas id="canvas" width="1100" height="600" style="border: solid 2px #000;box-sizing: border-box;"></canvas>
    <input type="button" value="pen" id="pen"> 
    <input type="button" value="eraser" id="eraser">
    <input type="button" value="clear" id="clear">
    
    <div id="result"><img src=""></div>
   
    <script>
      // canvas
      var cnvs = document.getElementById('canvas');
      var ctx = cnvs.getContext('2d');
   
      // 変数宣言
      const cnvWidth = 1100;
      const cnvHeight = 600;
      var cnvColor = "255, 255, 255, 1";  // 線の色(赤、緑、青、透明度)
      var cnvBold = 3;  // 線の太さ
      var clickFlg = 0;  // クリック中の判定 1:クリック開始 2:クリック中
      var bgColor = "rgb(0,70,67)";
   
      // canvasの背景色を設定(指定がない場合にjpeg保存すると背景が黒になる)
      setBgColor();
   
      // canvas上でのイベント
      $("#canvas").mousedown(function(){
        clickFlg = 1; // マウス押下開始
      }).mouseup(function(){
        clickFlg = 0; // マウス押下終了
      }).mousemove(function(e){
        // マウス移動処理
        if(!clickFlg) return false;
        draw(e.offsetX, e.offsetY);
      });
   
      // 描画処理
      function draw(x, y) {
        ctx.lineWidth = cnvBold;
        ctx.strokeStyle = 'rgba('+cnvColor+')';
        // 初回処理の判定
        if (clickFlg == "1") {
          clickFlg = "2";
          ctx.beginPath();
          ctx.lineCap = "round";  //　線を角丸にする
          ctx.moveTo(x, y);
        } else {
          ctx.lineTo(x, y);
        }
        ctx.stroke();
      };

      //ペン
      $("#pen").click(function(){
        cnvBold = 3;    //線の太さ
        cnvColor = "255, 255, 255, 1";  //線の色
      })

      //消しゴム
       $("#eraser").click(function(){
        cnvBold = 15;    //線の太さ
        cnvColor = "0, 70, 67, 1";  //線の色
      })

      // 描画クリア
      $("#clear").click(function(){
        ctx.clearRect(0,0,cnvWidth,cnvHeight);
        setBgColor();
      });

      function setBgColor(){
        // canvasの背景色を設定(指定がない場合にjpeg保存すると背景が黒になる)
        ctx.fillStyle = bgColor;
        ctx.fillRect(0,0,cnvWidth,cnvHeight);
      }
    </script>

    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.21.1/firebase-app.js"></script>

    <script src="https://www.gstatic.com/firebasejs/7.9.3/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.9.3/firebase-database.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
    https://firebase.google.com/docs/web/setup#available-libraries -->

    <script> 
        // Your web app's Firebase configuration
        var firebaseConfig = {
            apiKey: "AIzaSyBpmypIXLxfFpHxcAWRnF2vQB_ONU6OISA",
            authDomain: "project2020-93dda.firebaseapp.com",
            databaseURL: "https://project2020-93dda.firebaseio.com",
            projectId: "project2020-93dda",
            storageBucket: "project2020-93dda.appspot.com",
            messagingSenderId: "453159572734",
            appId: "1:453159572734:web:e3f6b15cb3bb4b1b9401af"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);

        var db = firebase.database();

    </script>

</body>
</html>