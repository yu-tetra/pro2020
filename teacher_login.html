<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./CSS/style.css">
    <link rel="stylesheet" href="./CSS/content.css">
    <link rel="shortcutico" href="favicon.ico">
    <title>部屋制作</title>
</head>
<body>
    <h1>部屋を制作しました</h1>

    <p>
        配布用URL→

        <input id="copyTarget" type="text" value="" readonly><button onclick="copyToClipboard()" id="cb">URLをコピー</button>
        
        <br>
        （ctrlキーとCキーを同時に押してコピー）
    </p>
    <button class="btn btn-primary btn-lg" id="submit">入室</button>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.21.1/firebase-app.js"></script>

    <script src="https://www.gstatic.com/firebasejs/7.9.3/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.9.3/firebase-firestore.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->

    <script> 
        // Your web appをs Firebase configuration
        var firebaseConfig = {
            apiKey: "AIzaSyBpmypIXLxfFpHxcAWRnF2vQB_ONU6OISA",
            authDomain: "project2020-93dda.firebaseapp.com",
            databaseURL: "https://project2020-93dda.firebaseio.com",
            projectId: "project2020-93dda",
            storageBucket: "project2020-93dda.appspot.com",
            messagingSenderId: "453159572734",
            appId: "1:453159572734:web:e3f6b15cb3bb4b1b9401af"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);

        var db = firebase.firestore();
        var cookies = document.cookie;
        var cookieItem = cookies.split(";");
        var elem = cookieItem[0].split("=");
        var elem1 = cookieItem[1].split("=");
        var id = "def";

        if(elem[0] == "id"){
        id = "id="+elem[1];
        }else{
        id = "id="+elem1[1];
        }

        document.getElementById( "copyTarget" ).value = "https://project2020-93dda.web.app/student.html?"+id;

        function copyToClipboard() {
         // コピー対象をJavaScript上で変数として定義する
            var copyTarget = document.getElementById("copyTarget");
            // コピー対象のテキストを選択する
            copyTarget.select();
            // 選択しているテキストをクリップボードにコピーする
            document.execCommand("Copy");
            // コピーをお知らせする
            alert("URLをコピーしました");
        };
        
        // var subwin;

        $('#submit').on('click',function(){
           subwin = window.open("main.html", "sub", "width=1200,height=680");

        });

    </script>

</body>
</html>