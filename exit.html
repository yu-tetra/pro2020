<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <link rel="stylesheet" href="./CSS/style.css">
    <link rel="stylesheet" href="./CSS/content.css">
    <link rel="shortcutico" href="favicon.ico">
    <title>授業終了</title>
</head>
<body>
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.21.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.9.3/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.9.3/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.6.1/firebase-storage.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
    https://firebase.google.com/docs/web/setup#available-libraries -->
    
    <h1>授業が終わりました。</h1>
    <p>このままタブを閉じることができます。</p>

    <p><a href="index.html">Topページに戻る</a></p>

    <script>
    
    var firebaseConfig = {
            apiKey: "AIzaSyBpmypIXLxfFpHxcAWRnF2vQB_ONU6OISA",
            authDomain: "project2020-93dda.firebaseapp.com",
            databaseURL: "https://project2020-93dda.firebaseio.com",
            projectId: "project2020-93dda",
            storageBucket: "project2020-93dda.appspot.com",
            messagingSenderId: "453159572734",
            appId: "1:453159572734:web:e3f6b15cb3bb4b1b9401af"
    };
        firebase.initializeApp(firebaseConfig);

    var db = firebase.firestore();
    var cookies = document.cookie;
    var cookieItem = cookies.split(";");
    var elem = cookieItem[0].split("=");
    var elem1 = cookieItem[1].split("=");
    var id = "def";

    if(elem[0] == "id"){
        id = elem[1];
    }else{
        id = elem1[1];
    }

    var ref= firebase.firestore().collection("rooms").doc(id);

    ref.delete().then(function() {
        console.log("Document successfully deleted!");
    });

    // サブディレクトリを含めて一括削除
    const client = require('firebase-tools');
    client.firestore
      .delete(collectionPath, {
        project: process.env.GCLOUD_PROJECT,
        recursive: true,
        yes: true
      }); 
 
    </script>
    
</body>
</html>